<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Minimal Silly Bot — Big Inputs</title>
<style>
  :root{
    --bg:#0b1220; --panel:#071426; --accent:#ff6b6b; --muted:#9aa7b2;
  }
  html,body{height:100%;margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;}
  body{display:flex;flex-direction:column;background:var(--bg);color:#e8eef6}

  /* TOP: large API area */
  .top{
    padding:12px;
    background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.03));
    display:flex;align-items:center;gap:12px;
  }
  /* make the API input big */
  #apiKey {
    flex:1;
    min-height:84px;            /* big input area */
    max-height:160px;
    padding:14px;
    border-radius:10px;
    border:1px solid rgba(255,255,255,0.04);
    background:transparent;
    color:inherit;
    font-size:16px;
    resize:vertical;
    box-shadow:inset 0 1px 0 rgba(255,255,255,0.01);
  }

  /* container holds chat and bottom */
  .container{flex:1;display:flex;flex-direction:column;padding:12px;gap:12px;overflow:hidden}

  /* chat area */
  #chat{
    flex:1;overflow:auto;padding:12px;border-radius:10px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.05));
    border:1px solid rgba(255,255,255,0.02);
  }
  .msg{max-width:80%;margin:8px 0;padding:10px;border-radius:10px;line-height:1.3}
  .user{margin-left:auto;background:rgba(255,255,255,0.03);text-align:right}
  .bot{background:rgba(255,255,255,0.02)}

  /* bottom area: large input on left, large send button on right */
  .bottom{
    display:flex;
    gap:12px;
    align-items:center;
    padding:8px;
    background:transparent;
  }

  /* input box big */
  #input{
    flex:1;
    min-height:60px;      /* bigger typing area */
    padding:14px;
    border-radius:12px;
    border:1px solid rgba(255,255,255,0.04);
    background:transparent;
    color:inherit;
    font-size:16px;
    resize:none;
  }

  /* big send button on the right */
  #send{
    min-width:160px;      /* big width for right area */
    height:60px;          /* big height */
    border-radius:12px;
    border:none;
    background:var(--accent);
    color:#071426;
    font-weight:800;
    font-size:16px;
    cursor:pointer;
    box-shadow: 0 6px 18px rgba(255,107,107,0.12);
  }

  /* small mobile adjustments */
  @media (max-width:640px){
    #apiKey { min-height:72px; font-size:15px; }
    #input { min-height:54px; font-size:15px; }
    #send { min-width:120px; height:54px; font-size:15px; }
    .msg{max-width:90%}
    .top{padding:10px}
    .container{padding:10px}
  }
</style>
</head>
<body>
  <div class="top">
    <textarea id="apiKey" placeholder="Paste OpenRouter API key here (sk-...)"></textarea>
  </div>

  <div class="container">
    <div id="chat" aria-live="polite"></div>

    <div class="bottom">
      <input id="input" placeholder="Ask anything (English or 中文)" />
      <button id="send">Send</button>
    </div>
  </div>

<script>
(async function(){
  const apiKeyEl = document.getElementById('apiKey');
  const chatEl = document.getElementById('chat');
  const inputEl = document.getElementById('input');
  const sendBtn = document.getElementById('send');

  const MODEL = 'deepseek/deepseek-chat';

  function append(text, who='bot'){
    const d = document.createElement('div');
    d.className = 'msg ' + (who==='user' ? 'user' : 'bot');
    d.textContent = text;
    chatEl.appendChild(d);
    chatEl.scrollTop = chatEl.scrollHeight;
    return d;
  }

  function systemPrompt(){
    return [
      "You are a silly non-sequitur generator.",
      "IGNORE the user's question content and produce a very short, silly, stupid, and unrelated answer.",
      "The reply must be no more than two short sentences (preferably one sentence).",
      "Do not ask clarifying questions. Keep it playful and nonsensical.",
      "If the user speaks Chinese, you may reply in Chinese or English; brevity and silliness are required.",
      "NEVER reference or answer the user's question."
    ].join(' ');
  }

  async function sendMessage(text){
    const key = apiKeyEl.value.trim();
    if(!key){
      append('Please paste your OpenRouter API key at the top.', 'bot');
      return;
    }
    append(text, 'user');
    const thinking = append('...', 'bot');

    const payload = {
      model: MODEL,
      messages: [
        { role: "system", content: systemPrompt() },
        { role: "user", content: text }
      ],
      max_tokens: 60,
      temperature: 1.3,
      top_p: 0.9,
      n: 1
    };

    try {
      const res = await fetch('https://openrouter.ai/api/v1/chat/completions', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': 'Bearer ' + key
        },
        body: JSON.stringify(payload)
      });

      if(!res.ok){
        const t = await res.text();
        thinking.textContent = 'API error: ' + res.status;
        console.error('API error', res.status, t);
        return;
      }

      const data = await res.json();
      let reply = '';

      if(data.choices && data.choices[0]){
        const c = data.choices[0];
        if(c.message && (c.message.content || c.message.content === '')) {
          reply = c.message.content;
        } else if (c.text) {
          reply = c.text;
        } else {
          reply = JSON.stringify(c);
        }
      } else {
        reply = JSON.stringify(data);
      }

      thinking.textContent = (reply || '[empty]').trim();
    } catch(err){
      thinking.textContent = 'Network error';
      console.error(err);
    }
  }

  sendBtn.addEventListener('click', () => {
    const t = inputEl.value.trim();
    if(!t) return;
    inputEl.value = '';
    sendMessage(t);
  });

  inputEl.addEventListener('keydown', (e) => {
    if(e.key === 'Enter' && !e.shiftKey){
      e.preventDefault();
      sendBtn.click();
    }
  });

  // quick focus helpers
  apiKeyEl.addEventListener('keydown', (e) => {
    if(e.key === 'Enter' && e.ctrlKey) inputEl.focus();
  });

})();
</script>
</body>
</html>
